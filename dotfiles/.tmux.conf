# 启用 truecolor 支持
set-option -ga terminal-overrides ',xterm-256color:Tc'

# 设置默认终端为支持 256 色的 xterm
set -g default-terminal "xterm-256color"

#启用鼠标支持
set -g mouse on

# 允许 tmux 与系统剪贴板交互
set -g set-clipboard on

# change prefix into c-s
unbind C-b
set -g prefix C-s
bind C-s send-prefix

# plugins 
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'

# themes
thm_base="#191724"
thm_surface="#1f1d2e"
thm_overlay="#26233a"
thm_muted="#6e6a86"
thm_subtle="#908caa"
thm_text="#e0def4"
thm_love="#eb6f92"
thm_gold="#f6c177"
thm_rose="#ebbcba"
thm_pine="#31748f"
thm_foam="#9ccfd8"
thm_iris="#c4a7e7"
thm_hl_low="#21202e"
thm_hl_med="#403d52"
thm_hl_high="#524f67"

set -g status-position top
set -g status-left-length 100
set -g status-right-length 100
set -g status-style "bg=default,fg=${thm_subtle}"
set -g status-left " #[fg=${thm_rose}] #[fg=${thm_rose},bold] #S #[fg=${thm_subtle}]   " #  
set -g status-right "#[fg=${thm_subtle}]%Y.%m.%d %H:%M "
set -g window-status-format " #[fg=${thm_subtle}]#I #[fg=${thm_muted}]#W "
set -g window-status-current-format " #[fg=${thm_foam}] #[fg=${thm_text},bold]#I #W #[fg=${thm_subtle}] " # 󰥓
set -g pane-border-style "fg=${thm_hl_low}"
set -g pane-active-border-style "fg=${thm_hl_high}"
set -g message-style "bg=default,fg=${thm_text}"
set -g mode-style "bg=${thm_hl_low},fg=${thm_subtle}"



# 前缀 + h/j/k/l 在面板之间移动
# bind h select-pane -L
# bind j select-pane -D
# bind k select-pane -U
# bind l select-pane -R
# 使用 Alt-hjkl 切换面板 (无需 Prefix)
bind-key -n M-h select-pane -L
bind-key -n M-j select-pane -D
bind-key -n M-k select-pane -U
bind-key -n M-l select-pane -R

# 前缀 + 方向键 调整面板大小（每次 5 个单元格）
bind -r Left  resize-pane -L 5
bind -r Down  resize-pane -D 5
bind -r Up    resize-pane -U 5
bind -r Right resize-pane -R 5

# 下 / 上一个 session 
bind -r ] switch-client -n
bind -r [ switch-client -p

# 切换到指定 window （Alt + 1~5）
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5


# yazi image preview required
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

# session 选择器（最重要）
bind s choose-tree -Zs

# 窗口和面板从 1 开始编号
set -g base-index 1
setw -g pane-base-index 1

# change split window shortcut
unbind %
bind '\' split-window -h
unbind '"'
bind - split-window -v

run '~/.tmux/plugins/tpm/tpm'
